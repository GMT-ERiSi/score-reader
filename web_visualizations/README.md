# Squadrons Stats - Web Visualizations

This directory contains the frontend code (HTML, CSS, JavaScript) for visualizing the ELO ratings and other statistics generated by the main Squadrons Screenshot Reader project.

## Purpose

The goal is to provide an interactive web-based interface to explore the processed game data, including:
- Team ELO progression and rankings.
- Pickup/Ranked Player ELO progression and rankings.
- Additional statistical leaderboards (AI Kills, Damage, Net Kills, Least Deaths).

## Development Approach (Phased)

Development is following a phased approach as outlined in the main `PRD_frontend.md`:

*   **Phase 1 (MVP - Complete):**
    *   Basic HTML structure (`index.html`).
    *   Basic CSS styling (`style.css`) with responsiveness.
    *   JavaScript (`script.js`) to load data and render visualizations.
    *   Basic, non-interactive line charts for Team ELO history and Pickup Player ELO history using Chart.js.
    *   Static HTML tables displaying the current Team ELO ladder and Pickup Player ELO ladder.
    *   **Note:** Initially configured to use embedded dummy data for demonstration.

*   **Phase 2 (Enhancements - Complete):**
    *   Added sorting and filtering capabilities to all leaderboard tables.
    *   Implemented additional leaderboards (AI Kills, Damage, Net Kills, Least Deaths).
    *   Enhanced chart interactivity with improved tooltips and optional zoom/pan capabilities.
    *   Improved responsive design and styling for better mobile experience.
    *   Added leaderboard-chart interaction (click on a team/player in the table to filter the chart).
    *   Restructured code into a modular approach with separate JS files for better maintainability.
    *   **Note:** Still using dummy data for demonstration, but with expanded player stats for additional leaderboards.

*   **Phase 3 (Future):**
    *   Address items from the "Future Considerations" section in `PRD_frontend.md` (e.g., additional stats, H2H comparisons).
    *   Build script implementation for optimization/bundling.
    *   Automated deployment via GitHub Actions.

## Project Structure

The project now uses a modular structure:

- **index.html**: Main HTML structure and entry point.
- **style.css**: Styling for all components with responsive design.
- **script.js**: Main script file that imports and coordinates other modules.
- **js/**: Directory containing modular JavaScript files:
  - **tableInteractivity.js**: Handles sorting, filtering, and selection features for tables.
  - **chartInteractivity.js**: Enhances chart interaction with tooltips and filtering.
  - **leaderboardManager.js**: Creates and manages additional leaderboards.
  - **dataMock.js**: Generates dummy data for demonstration purposes.

## Running the Visualization

Because browsers restrict local HTML files (`file:///`) from fetching other local files (like the JSON reports) for security reasons, you need to run a simple local web server to view this page correctly when using real data.

1.  **Navigate to the project root directory** (the parent directory of `web_visualizations/`) in your terminal.
2.  **Start a simple Python HTTP server:**
    ```bash
    python -m http.server 8000
    ```
    (If Python is not in your PATH, you might need `python3` or the full path to your Python executable).
3.  **Open your web browser** and go to: `http://localhost:8000/web_visualizations/`

## Current Status: Using Dummy Data

Currently, the code is configured to use **embedded dummy data** instead of fetching the real JSON files from `../stats_reports/` and `../elo_reports_pickup/`. This allows viewing the visualization structure and functionality without needing the actual report files to be generated or present.

### Switching Back to Real Data

To switch back to using the real, fetched data:

1.  Open `web_visualizations/script.js`.
2.  **Delete or comment out** the entire `// --- Dummy Data Generation ---` section.
3.  **Uncomment** the `async function fetchData() { ... }` block (remove the `/*` and `*/` around it).
4.  **Modify the event listener** at the very bottom of the file to call `fetchData()` instead of assigning dummy data.
5.  Save the changes to `script.js`.
6.  Ensure the required JSON files exist in `../stats_reports/` and `../elo_reports_pickup/`.
7.  Run the local web server as described above and access the page via `http://localhost:8000/web_visualizations/`

## Phase 2 Feature Details

### Interactive Leaderboards
- All tables now support sorting by clicking on column headers
- Search filters added above each table for quick filtering
- Rank numbers automatically update when sorting changes

### Chart Interactivity
- Enhanced tooltips show precise values on hover
- Charts can be filtered by clicking on a team/player in the leaderboard
- "Show All" button to reset the chart filter
- Optional zoom/pan capabilities via Chart.js Zoom plugin

### Additional Leaderboards
- AI Kills Leaderboard: Tracks AI kills by player
- Damage Leaderboard: Shows total damage and damage per match
- Net Kills Leaderboard: Displays kill/death difference (player kills - deaths)
- Least Deaths Leaderboard: Highlights players with lowest deaths per match

### Responsive Design
- Improved table layouts for mobile devices
- Better control placement and sizing for small screens
- Filter controls adapt to screen size